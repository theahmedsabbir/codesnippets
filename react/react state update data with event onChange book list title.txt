import React, { Component } from 'react';
import Book from './components/Book';
import './App.css';

class App extends Component {
  // State
  state = {
    books: [
      { id: 1, bookName: "1984", writer: "George Orwell" },
      { id: 2, bookName: "The Da Vinci Code", writer: "Dan Brown" },
      { id: 3, bookName: "The Alchemist", writer: "Paulo Coelho" }
    ],
    otherProp: "I am some other Property"
  }

  deleteBook = index => {
    //state theke books er ekta copy nibo 

    // let state_books_copy = this.state.books.slice();
    // let state_books_copy = this.state.books.map(book => book);
    let state_books_copy = [...this.state.books];

    // then setar index delete kore new books state e set korbo 
    state_books_copy.splice(index, 1);

    this.setState({
      books: state_books_copy,
    });
  }

  updateBookTitle(event, index) {
    let state_books_copy = [...this.state.books];
    state_books_copy[index].bookName = event.target.value;

    this.setState({
      books: state_books_copy,
    });
  }

  render() {

    // showing books with map //make tag
    let bookElements = this.state.books.map((book, index) => {
      return (
        <Book
          key={book.id}
          bookName={book.bookName}
          writer={book.writer}
          // deleteBook={this.deleteBook.bind(this, index)}
          deleteBook={() => this.deleteBook(index)}
          updateBookTitle={(event) => this.updateBookTitle(event, index)}
        />
      );
    });


    return (
      <div className="App" >
        {/* inline css here */}
        < h1 className="header" > Book List</h1>

        {bookElements}
      </div >
    );
  }
}

export default App;